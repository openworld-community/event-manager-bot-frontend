import{S as P,i as U,s as q,k as b,q as A,a as k,l as v,m as g,r as I,h as d,c as x,n as C,b as w,G as p,J,K as Y,u as Z,H as M,L as $,y as R,z as j,A as z,g as S,f as ee,d as E,B as G,M as te,v as ae}from"../chunks/index.3209e063.js";import{u as K,p as ne,y as le,x as re,T as se}from"../chunks/TelegramScript.824b1c48.js";const W=[{label:"Name",systemName:"name",initValue:"",type:"text"},{label:"Link",systemName:"link",initValue:"",type:"text"},{label:"Start date",systemName:"start",initValue:"",type:"date"},{label:"Remind date",systemName:"remind",initValue:"",type:"date"},{label:"Max adults amount",systemName:"max_adults",initValue:"100",type:"number"},{label:"Max children amount",systemName:"max_children",initValue:"100",type:"number"},{label:"Max adults per reservation",systemName:"max_adults_per_reservation",initValue:"4",type:"number"},{label:"Max children per reservation",systemName:"max_children_per_reservation",initValue:"4",type:"number"},{label:"Adult ticket price",systemName:"adult_ticket_price",initValue:"100",type:"number"},{label:"Children ticket price",systemName:"children_ticket_price",initValue:"50",type:"number"},{label:"Currency",systemName:"currency",initValue:"USD",type:"text"}],ie=(t,e)=>e,oe=t=>e=>t(e.target.value),ue=t=>e=>t(e.currentTarget),B=W.map(t=>{const e=K(),a=ne(t.initValue).on(e,ie);return{...t,handler:oe(e),valueStore:a}}),Q=K(),me=le(async t=>{Telegram.WebApp.sendData(JSON.stringify(t))}),ce=t=>{const e={};for(let a=0;a<t.length;a++)e[W[a].systemName]=t[a];return e};re({source:B.map(({valueStore:t})=>t),clock:Q,fn:ce,target:me});const fe=()=>{};function pe(t){let e,a,l,i,u,_,h;return{c(){e=b("label"),a=b("span"),l=A(t[0]),i=k(),u=b("input"),this.h()},l(f){e=v(f,"LABEL",{});var o=g(e);a=v(o,"SPAN",{});var m=g(a);l=I(m,t[0]),m.forEach(d),i=x(o),u=v(o,"INPUT",{type:!0}),o.forEach(d),this.h()},h(){C(u,"type",t[1]),u.value=t[4]},m(f,o){w(f,e,o),p(e,a),p(a,l),p(e,i),p(e,u),_||(h=J(u,"input",function(){Y(t[2])&&t[2].apply(this,arguments)}),_=!0)},p(f,[o]){t=f,o&1&&Z(l,t[0]),o&2&&C(u,"type",t[1]),o&16&&u.value!==t[4]&&(u.value=t[4])},i:M,o:M,d(f){f&&d(e),_=!1,h()}}}function _e(t,e,a){let l,i=M,u=()=>(i(),i=$(o,m=>a(4,l=m)),o);t.$$.on_destroy.push(()=>i());let{label:_=""}=e,{type:h="text"}=e,{handler:f=fe}=e,{valueStore:o=void 0}=e;return u(),t.$$set=m=>{"label"in m&&a(0,_=m.label),"type"in m&&a(1,h=m.type),"handler"in m&&a(2,f=m.handler),"valueStore"in m&&u(a(3,o=m.valueStore))},[_,h,f,o,l]}class he extends P{constructor(e){super(),U(this,e,_e,pe,q,{label:0,type:1,handler:2,valueStore:3})}}function D(t,e,a){const l=t.slice();return l[0]=e[a],l}function O(t){let e,a;return e=new he({props:{label:t[0].label,type:t[0].type,handler:t[0].handler,valueStore:t[0].valueStore}}),{c(){R(e.$$.fragment)},l(l){j(e.$$.fragment,l)},m(l,i){z(e,l,i),a=!0},p:M,i(l){a||(S(e.$$.fragment,l),a=!0)},o(l){E(e.$$.fragment,l),a=!1},d(l){G(e,l)}}}function de(t){let e,a,l,i,u,_,h,f,o,m,V,F,H;e=new se({});let y=B,s=[];for(let n=0;n<y.length;n+=1)s[n]=O(D(t,y,n));const X=n=>E(s[n],1,1,()=>{s[n]=null});return{c(){R(e.$$.fragment),a=k(),l=b("main"),i=b("form"),u=b("h1"),_=A("Create new event"),h=k();for(let n=0;n<s.length;n+=1)s[n].c();f=k(),o=b("button"),m=A("Create event"),this.h()},l(n){j(e.$$.fragment,n),a=x(n),l=v(n,"MAIN",{});var c=g(l);i=v(c,"FORM",{class:!0});var r=g(i);u=v(r,"H1",{});var N=g(u);_=I(N,"Create new event"),N.forEach(d),h=x(r);for(let T=0;T<s.length;T+=1)s[T].l(r);f=x(r),o=v(r,"BUTTON",{type:!0});var L=g(o);m=I(L,"Create event"),L.forEach(d),r.forEach(d),c.forEach(d),this.h()},h(){C(o,"type","submit"),C(i,"class","form svelte-14sj0h8")},m(n,c){z(e,n,c),w(n,a,c),w(n,l,c),p(l,i),p(i,u),p(u,_),p(i,h);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(i,null);p(i,f),p(i,o),p(o,m),V=!0,F||(H=J(i,"submit",ue(Q)),F=!0)},p(n,[c]){if(c&0){y=B;let r;for(r=0;r<y.length;r+=1){const N=D(n,y,r);s[r]?(s[r].p(N,c),S(s[r],1)):(s[r]=O(N),s[r].c(),S(s[r],1),s[r].m(i,f))}for(ae(),r=y.length;r<s.length;r+=1)X(r);ee()}},i(n){if(!V){S(e.$$.fragment,n);for(let c=0;c<y.length;c+=1)S(s[c]);V=!0}},o(n){E(e.$$.fragment,n),s=s.filter(Boolean);for(let c=0;c<s.length;c+=1)E(s[c]);V=!1},d(n){G(e,n),n&&d(a),n&&d(l),te(s,n),F=!1,H()}}}class ve extends P{constructor(e){super(),U(this,e,null,de,q,{})}}export{ve as component};
