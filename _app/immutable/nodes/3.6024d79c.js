import{S as Ce,i as Ee,s as Ie,k as R,q as Se,a as se,l as $,m as j,r as ke,h as z,c as ue,n as Z,b as we,G as N,J as Je,K as ht,u as gt,H as q,L as bt,M as yt,N as vt,y as Ke,z as Qe,A as Xe,g as K,f as _t,d as ce,B as Ye,O as St,v as kt}from"../chunks/index.4ff09b3d.js";function wt(e,t){for(let r in e)t(e[r],r)}function E(e,t){e.forEach(t)}function T(e,t){if(!e)throw Error(t)}function ne({node:e=[],from:t,source:r,parent:a=t||r,to:l,target:s,child:n=l||s,scope:d={},meta:h={},family:u={type:"regular"},regional:f}={}){let g=ie(a),b=ie(u.links),o=ie(u.owners),c=[];E(e,w=>w&&V(c,w));let i={id:Et(),seq:c,next:ie(n),meta:h,scope:d,family:{type:u.type||"crosslink",links:b,owners:o}};return E(b,w=>V(me(w),i)),E(o,w=>V(he(w),i)),E(g,w=>V(w.next,i)),f&&L&&it(Y(L),[i]),i}function Ze(e,t,r){let a,l=I,s=null,n=k;if(e.target&&(t=e.params,r=e.defer,a=e.meta,l="page"in e?e.page:l,e.stack&&(s=e.stack),n=le(e)||n,e=e.target),n&&k&&n!==k&&(k=null),Array.isArray(e))for(let c=0;c<e.length;c++)P("pure",l,A(e[c]),s,t[c],n,a);else P("pure",l,A(e),s,t,n,a);if(r&&!oe)return;let d,h,u,f,g,b,o={isRoot:oe,currentPage:I,scope:k,isWatch:ve,isPure:fe};oe=0;e:for(;f=Ft();){let{idx:c,stack:i,type:w}=f;u=i.node,I=g=i.page,k=le(i),g?b=g.reg:k&&(b=k.reg);let p=!!g,y=!!k,m={fail:0,scope:u.scope};d=h=0;for(let x=c;x<u.seq.length&&!d;x++){let v=u.seq[x];if(v.order){let{priority:_,barrierID:S}=v.order,M=S?g?`${g.fullID}_${S}`:S:0;if(x!==c||w!==_){S?ye.has(M)||(ye.add(M),Me(x,i,_,S)):Me(x,i,_);continue e}S&&ye.delete(M)}switch(v.type){case"mov":{let S,M=v.data;switch(M.from){case te:S=Y(i);break;case"a":case"b":S=i[M.from];break;case"value":S=M.store;break;case"store":if(b&&!b[M.store.id])if(p){let ge=ct(g,M.store.id);i.page=g=ge,ge?b=ge.reg:y?(W(k,M.store,0,1,M.softRead),b=k.reg):b=void 0}else y&&W(k,M.store,0,1,M.softRead);S=ut(b&&b[M.store.id]||M.store)}switch(M.to){case te:i.value=S;break;case"a":case"b":i[M.to]=S;break;case"store":Ot(g,k,u,M.target).current=S}break}case"compute":let _=v.data;if(_.fn){ve=C(u,"op")==="watch",fe=_.pure;let S=_.safe?(0,_.fn)(Y(i),m.scope,i):Dt(m,_.fn,i);_.filter?h=!S:i.value=S,ve=o.isWatch,fe=o.isPure}}d=m.fail||h}if(!d){let x=Y(i),v=le(i);if(E(u.next,_=>{P("child",g,_,i,x,v)}),v){C(u,"needFxCounter")&&P("child",g,v.fxCount,i,x,v),C(u,"storeChange")&&P("child",g,v.storeChange,i,x,v),C(u,"warnSerialize")&&P("child",g,v.warnSerializeNode,i,x,v);let _=v.additionalLinks[u.id];_&&E(_,S=>{P("child",g,S,i,x,v)})}}}oe=o.isRoot,I=o.currentPage,k=le(o)}function xt(e,t){let r,a,l=e;if(t){let s=Nt(t);e.length===0?(r=s.path,a=s.fullName):(r=s.path.concat([e]),a=s.fullName.length===0?e:s.fullName+"/"+e)}else r=e.length===0?[]:[e],a=e;return{shortName:l,fullName:a,path:r}}function X(e,...t){let r=Re();if(r){let a=r.handlers[e];if(a)return a(r,...t)}}function H(e,t){let r=ae({or:t,and:typeof e=="string"?{name:e}:e}),a=(n,...d)=>(re(!C(a,"derived"),"call of derived event","createEvent"),re(!fe,"unit call from pure function","operators like sample"),I?((h,u,f,g)=>{let b=I,o=null;if(u)for(o=I;o&&o.template!==u;)o=U(o);Te(o);let c=h.create(f,g);return Te(b),c})(a,l,n,d):a.create(n,d)),l=Re(),s=Object.assign(a,{graphite:ne({meta:pt(r.actualOp||"event",a,r),regional:1}),create:n=>(Ze({target:a,params:n,scope:k}),n),watch:n=>dt(a,n),map:n=>_e(a,ee,n,[B()]),filter:n=>_e(a,"filter",n.fn?n:n.fn,[B($e,1)]),filterMap:n=>_e(a,"filterMap",n,[B(),xe(d=>!O(d),1)]),prepend(n){let d=H("* → "+a.shortName,{parent:U(a)});return X("eventPrepend",A(d)),Fe(d,a,[B()],"prepend",n),Tt(a,d),d}});return r!=null&&r.domain&&r.domain.hooks.event(s),Q(s,"id",s.graphite.id),lt(s.graphite),s}function Oe(e,t,r,a){return Rt(r,t,"first argument"),T(F(a),"second argument should be a function"),re(!C(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),E(Array.isArray(r)?r:[r],l=>{e.off(l),pe(e).set(l,ft(mt(l,e,"on",$t,a)))}),e}function et(e,t){let r=ae(t),a=jt(e),l=H({named:"updates",derived:1});X("storeBase",a);let s=a.id,n={subscribers:new Map,updates:l,defaultState:e,stateRef:a,getState(){let o,c=a;if(I){let i=I;for(;i&&!i.reg[s];)i=U(i);i&&(o=i)}return!o&&k&&(W(k,a,1),o=k),o&&(c=o.reg[s]),ut(c)},setState:o=>Ze({target:n,params:o,defer:1,scope:k}),reset:(...o)=>(E(o,c=>Oe(n,".reset",c,()=>n.defaultState)),n),on:(o,c)=>Oe(n,".on",o,c),off(o){let c=pe(n).get(o);return c&&(c(),pe(n).delete(o)),n},map(o,c){let i,w;G(o)&&(i=o,o=o.fn),re(O(c),"second argument of store.map","updateFilter");let p=n.getState();Re()?w=null:O(p)||(w=o(p,c));let y=et(w,{name:`${n.shortName} → *`,derived:1,and:i}),m=mt(n,y,ee,De,o);return qt(de(y),{type:ee,fn:o,from:a}),de(y).noInit=1,X("storeMap",a,m),y},watch(o,c){if(!c||!tt(o)){let i=dt(n,o);return X("storeWatch",a,o)||o(n.getState()),i}return T(F(c),"second argument should be a function"),o.watch(i=>c(n.getState(),i))}},d=pt("store",n,r),h=n.defaultConfig.updateFilter;n.graphite=ne({scope:{state:a,fn:h},node:[xe((o,c,i)=>(i.scope&&!i.scope.reg[a.id]&&(i.b=1),o)),Pt(a),xe((o,c,{a:i,b:w})=>!O(o)&&(o!==i||w),1),h&&B(De,1),Ve({from:te,target:a})],child:l,meta:{...d,defaultState:e},regional:1}),Q(n,"id",n.graphite.id),Q(n,"rootStateRefId",s);let u=C(n,"serialize"),f=C(n,"derived"),g=u==="ignore",b=C(n,"sid");return b&&(Q(n,"storeChange",1),a.sid=b),b||g||f||Q(n,"warnSerialize",1),T(f||!O(e),"current state can't be undefined, use null instead"),it(n,[l]),r!=null&&r.domain&&r.domain.hooks.store(n),f||(n.reinit=H({named:"reinit"}),n.reset(n.reinit)),a.meta=n.graphite.meta,lt(n.graphite),n}let Mt=typeof Symbol<"u"&&Symbol.observable||"@@observable",ee="map",te="stack",A=e=>e.graphite||e,me=e=>e.family.owners,he=e=>e.family.links,de=e=>e.stateRef,Y=e=>e.value,pe=e=>e.subscribers,U=e=>e.parent,le=e=>e.scope,C=(e,t)=>A(e).meta[t],Q=(e,t,r)=>A(e).meta[t]=r,Nt=e=>e.compositeName,tt=e=>(F(e)||G(e))&&"kind"in e;const rt=e=>t=>tt(t)&&t.kind===e;let at=rt("store"),zt=rt("domain"),be=(e,t)=>{let r=e.indexOf(t);r!==-1&&e.splice(r,1)},V=(e,t)=>e.push(t),re=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const Ae=()=>{let e=0;return()=>""+ ++e};let Ct=Ae(),nt=Ae(),Et=Ae(),L=null,lt=e=>{},Re=()=>L,It=e=>(e&&L&&L.sidRoot&&(e=`${L.sidRoot}|${e}`),e),it=(e,t)=>{let r=A(e);E(t,a=>{let l=A(a);r.family.type!=="domain"&&(l.family.type="crosslink"),V(me(l),r),V(he(r),l)})},ie=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(A),G=e=>typeof e=="object"&&e!==null,F=e=>typeof e=="function",O=e=>e===void 0,At=e=>T(G(e)||F(e),"expect first argument be an object");const Be=(e,t,r,a)=>T(!(!G(e)&&!F(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${a}`);let Rt=(e,t,r)=>{Array.isArray(e)?E(e,(a,l)=>Be(a,t,`${l} item of ${r}`,"")):Be(e,t,r," or array of units")},De=(e,{fn:t},{a:r})=>t(e,r),$t=(e,{fn:t},{a:r})=>t(r,e),$e=(e,{fn:t})=>t(e);const ot=(e,t,r,a)=>{let l={id:nt(),type:e,data:t};return r&&(l.order={priority:r},a&&(l.order.barrierID=++Vt)),l};let Vt=0,Ve=({from:e="store",store:t,target:r,to:a=r?"store":te,batch:l,priority:s})=>ot("mov",{from:e,store:t,to:a,target:r},s,l),Pe=({fn:e,batch:t,priority:r,safe:a=0,filter:l=0,pure:s=0})=>ot("compute",{fn:e,safe:a,filter:l,pure:s},r,t),st=({fn:e})=>Pe({fn:e,priority:"effect"}),xe=(e,t,r)=>Pe({fn:e,safe:1,filter:t,priority:r&&"effect"}),Pt=(e,t,r)=>Ve({store:e,to:t?te:"a",priority:r&&"sampler",batch:1}),B=(e=$e,t)=>Pe({fn:e,pure:1,filter:t}),jt=e=>({id:nt(),current:e}),ut=({current:e})=>e,qt=(e,t)=>{e.before||(e.before=[]),V(e.before,t)},D=null;const je=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Ne(e.v.type)>Ne(t.v.type))&&(r=e,e=t,t=r),r=je(e.r,t),e.r=e.l,e.l=r,e},qe=[];let Le=0;for(;Le<6;)V(qe,{first:null,last:null,size:0}),Le+=1;const Ft=()=>{for(let e=0;e<6;e++){let t=qe[e];if(t.size>0){if(e===3||e===4){t.size-=1;let a=D.v;return D=je(D.l,D.r),a}t.size===1&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},P=(e,t,r,a,l,s,n)=>Me(0,{a:null,b:null,node:r,parent:a,value:l,page:t,scope:s,meta:n},e),Me=(e,t,r,a=0)=>{let l=Ne(r),s=qe[l],n={v:{idx:e,stack:t,type:r,id:a},l:null,r:null};l===3||l===4?D=je(D,n):(s.size===0?s.first=n:s.last.r=n,s.last=n),s.size+=1},Ne=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},ye=new Set;let k,oe=1,ve=0,fe=0,I=null,Te=e=>{I=e};const ct=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=U(e);if(e)return e}return null};let Ot=(e,t,r,a,l)=>{let s=ct(e,a.id);return s?s.reg[a.id]:t?(W(t,a,l),t.reg[a.id]):a};const Bt=e=>e;let W=(e,t,r,a,l)=>{var s;let n=e.reg,d=t.sid,h=t==null||(s=t.meta)===null||s===void 0?void 0:s.serialize,u=e.fromSerialize&&h!=="ignore"&&(h==null?void 0:h.read)||Bt;if(n[t.id])return;let f={id:t.id,current:t.current,meta:t.meta};if(f.id in e.values.idMap)f.current=e.values.idMap[f.id];else if(d&&d in e.values.sidMap&&!(d in e.sidIdMap))f.current=u(e.values.sidMap[d]);else if(t.before&&!l){let g=0,b=r||!t.noInit||a;E(t.before,o=>{switch(o.type){case ee:{let c=o.from;if(c||o.fn){c&&W(e,c,r,a);let i=c&&n[c.id].current;b&&(f.current=o.fn?o.fn(i):i)}break}case"field":g||(g=1,f.current=Array.isArray(f.current)?[...f.current]:{...f.current}),W(e,o.from,r,a),b&&(f.current[o.field]=n[n[o.from.id].id].current)}})}d&&(e.sidIdMap[d]=t.id),n[t.id]=f};const Dt=(e,t,r)=>{try{return t(Y(r),e.scope,r)}catch(a){console.error(a),e.fail=1,e.failReason=a}};let ae=(e,t={})=>(G(e)&&(ae(e.or,t),wt(e,(r,a)=>{O(r)||a==="or"||a==="and"||(t[a]=r)}),ae(e.and,t)),t);const He=(e,t)=>{be(e.next,t),be(me(e),t),be(he(e),t)},ze=(e,t,r)=>{let a;e.next.length=0,e.seq.length=0,e.scope=null;let l=he(e);for(;a=l.pop();)He(a,e),(t||r&&C(e,"op")!=="sample"||a.family.type==="crosslink")&&ze(a,t,C(a,"op")!=="on"&&r);for(l=me(e);a=l.pop();)He(a,e),r&&a.family.type==="crosslink"&&ze(a,t,C(a,"op")!=="on"&&r)},J=e=>e.clear();let Lt=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),at(e))J(pe(e));else if(zt(e)){r=1;let a=e.history;J(a.events),J(a.effects),J(a.stores),J(a.domains)}ze(A(e),!!t,r)},ft=e=>{let t=()=>Lt(e);return t.unsubscribe=t,t},Fe=(e,t,r,a,l)=>ne({node:r,parent:e,child:t,scope:{fn:l},meta:{op:a},family:{owners:[e,t],links:t},regional:1}),dt=(e,t)=>(T(F(t),".watch argument should be a function"),ft(ne({scope:{fn:t},node:[st({fn:$e})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),Tt=(e,t,r="event")=>{U(e)&&U(e).hooks[r](t)},pt=(e,t,r)=>{let a=ae(r),l=e==="domain",s=Ct(),{sid:n=null,named:d=null,domain:h=null,parent:u=h}=a,f=d||a.name||(l?"":s),g=xt(f,u),b={op:t.kind=e,name:t.shortName=f,sid:t.sid=It(n),named:d,unitId:t.id=s,serialize:a.serialize,derived:a.derived,config:a};return t.parent=u,t.compositeName=g,t.defaultConfig=a,t.thru=o=>(re(0,"thru","js pipe"),o(t)),t.getType=()=>g.fullName,!l&&(t.subscribe=o=>(At(o),t.watch(F(o)?o:c=>o.next&&o.next(c))),t[Mt]=()=>t),b};const _e=(e,t,r,a)=>{let l;G(r)&&(l=r,r=r.fn);let s=H({name:`${e.shortName} → *`,derived:1,and:l});return Fe(e,s,a,t,r),s},mt=(e,t,r,a,l)=>{let s=de(t),n=Ve({store:s,to:"a",priority:"read"});r===ee&&(n.data.softRead=1);let d=[n,B(a)];return X("storeOnMap",s,d,at(e)&&de(e)),Fe(e,t,d,r,l)};ne({node:[st({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}});const Ht=[{label:"Name",initValue:"",type:"text"},{label:"Link",initValue:"",type:"text"},{label:"Start date",initValue:"",type:"date"},{label:"Remind date",initValue:"",type:"date"},{label:"Max adults amount",initValue:"100",type:"number"},{label:"Max children amount",initValue:"100",type:"number"},{label:"Max adults per reservation",initValue:"4",type:"number"},{label:"Max children per reservation",initValue:"4",type:"number"},{label:"Adult ticket price",initValue:"100",type:"number"},{label:"Children ticket price",initValue:"50",type:"number"},{label:"Currency",initValue:"USD",type:"text"}],Ut=(e,t)=>t,Wt=e=>t=>e(t.target.value),Gt=e=>()=>e(),Ue=Ht.map(e=>{const t=H(),r=et(e.initValue).on(t,Ut);return{...e,handler:Wt(t),valueStore:r}}),Jt=H(),Kt=()=>{};function Qt(e){let t,r,a,l,s,n,d;return{c(){t=R("label"),r=R("span"),a=Se(e[0]),l=se(),s=R("input"),this.h()},l(h){t=$(h,"LABEL",{});var u=j(t);r=$(u,"SPAN",{});var f=j(r);a=ke(f,e[0]),f.forEach(z),l=ue(u),s=$(u,"INPUT",{type:!0}),u.forEach(z),this.h()},h(){Z(s,"type",e[1]),s.value=e[4]},m(h,u){we(h,t,u),N(t,r),N(r,a),N(t,l),N(t,s),n||(d=Je(s,"input",function(){ht(e[2])&&e[2].apply(this,arguments)}),n=!0)},p(h,[u]){e=h,u&1&&gt(a,e[0]),u&2&&Z(s,"type",e[1]),u&16&&s.value!==e[4]&&(s.value=e[4])},i:q,o:q,d(h){h&&z(t),n=!1,d()}}}function Xt(e,t,r){let a,l=q,s=()=>(l(),l=bt(u,f=>r(4,a=f)),u);e.$$.on_destroy.push(()=>l());let{label:n=""}=t,{type:d="text"}=t,{handler:h=Kt}=t,{valueStore:u=void 0}=t;return s(),e.$$set=f=>{"label"in f&&r(0,n=f.label),"type"in f&&r(1,d=f.type),"handler"in f&&r(2,h=f.handler),"valueStore"in f&&s(r(3,u=f.valueStore))},[n,d,h,u,a]}class Yt extends Ce{constructor(t){super(),Ee(this,t,Xt,Qt,Ie,{label:0,type:1,handler:2,valueStore:3})}}function Zt(e){let t,r;return{c(){t=R("script"),this.h()},l(a){const l=yt("svelte-wd0s37",document.head);t=$(l,"SCRIPT",{src:!0}),j(t).forEach(z),l.forEach(z),this.h()},h(){vt(t.src,r="https://telegram.org/js/telegram-web-app.js")||Z(t,"src",r)},m(a,l){N(document.head,t)},p:q,i:q,o:q,d(a){z(t)}}}class er extends Ce{constructor(t){super(),Ee(this,t,null,Zt,Ie,{})}}function We(e,t,r){const a=e.slice();return a[0]=t[r],a}function Ge(e){let t,r;return t=new Yt({props:{label:e[0].label,type:e[0].type,handler:e[0].handler,valueStore:e[0].valueStore}}),{c(){Ke(t.$$.fragment)},l(a){Qe(t.$$.fragment,a)},m(a,l){Xe(t,a,l),r=!0},p:q,i(a){r||(K(t.$$.fragment,a),r=!0)},o(a){ce(t.$$.fragment,a),r=!1},d(a){Ye(t,a)}}}function tr(e){let t,r,a,l,s,n,d,h,u,f,g,b,o;t=new er({});let c=Ue,i=[];for(let p=0;p<c.length;p+=1)i[p]=Ge(We(e,c,p));const w=p=>ce(i[p],1,1,()=>{i[p]=null});return{c(){Ke(t.$$.fragment),r=se(),a=R("main"),l=R("form"),s=R("h1"),n=Se("Create new event"),d=se();for(let p=0;p<i.length;p+=1)i[p].c();h=se(),u=R("button"),f=Se("Create event"),this.h()},l(p){Qe(t.$$.fragment,p),r=ue(p),a=$(p,"MAIN",{});var y=j(a);l=$(y,"FORM",{class:!0});var m=j(l);s=$(m,"H1",{});var x=j(s);n=ke(x,"Create new event"),x.forEach(z),d=ue(m);for(let _=0;_<i.length;_+=1)i[_].l(m);h=ue(m),u=$(m,"BUTTON",{type:!0});var v=j(u);f=ke(v,"Create event"),v.forEach(z),m.forEach(z),y.forEach(z),this.h()},h(){Z(u,"type","submit"),Z(l,"class","form svelte-14sj0h8")},m(p,y){Xe(t,p,y),we(p,r,y),we(p,a,y),N(a,l),N(l,s),N(s,n),N(l,d);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(l,null);N(l,h),N(l,u),N(u,f),g=!0,b||(o=Je(l,"submit",Gt(Jt)),b=!0)},p(p,[y]){if(y&0){c=Ue;let m;for(m=0;m<c.length;m+=1){const x=We(p,c,m);i[m]?(i[m].p(x,y),K(i[m],1)):(i[m]=Ge(x),i[m].c(),K(i[m],1),i[m].m(l,h))}for(kt(),m=c.length;m<i.length;m+=1)w(m);_t()}},i(p){if(!g){K(t.$$.fragment,p);for(let y=0;y<c.length;y+=1)K(i[y]);g=!0}},o(p){ce(t.$$.fragment,p),i=i.filter(Boolean);for(let y=0;y<i.length;y+=1)ce(i[y]);g=!1},d(p){Ye(t,p),p&&z(r),p&&z(a),St(i,p),b=!1,o()}}}class ar extends Ce{constructor(t){super(),Ee(this,t,null,tr,Ie,{})}}export{ar as component};
