import{S as H,i as L,s as O,k as b,q as F,a as E,l as y,m as v,r as I,h as p,c as C,n as V,b as w,G as h,J as R,K as Y,u as Z,H as N,L as $,M as ee,N as te,o as ae,y as U,z as J,A as W,g as x,f as ne,d as M,B as z,O as le,v as re}from"../chunks/index.4ff09b3d.js";import{u as G,p as se,y as ie,x as oe}from"../chunks/effector.52397b01.js";const K=[{label:"Name",systemName:"name",initValue:"",type:"text"},{label:"Link",systemName:"link",initValue:"",type:"text"},{label:"Start date",systemName:"start",initValue:"",type:"date"},{label:"Remind date",systemName:"remind",initValue:"",type:"date"},{label:"Max adults amount",systemName:"max_adults",initValue:"100",type:"number"},{label:"Max children amount",systemName:"max_children",initValue:"100",type:"number"},{label:"Max adults per reservation",systemName:"max_adults_per_reservation",initValue:"4",type:"number"},{label:"Max children per reservation",systemName:"max_children_per_reservation",initValue:"4",type:"number"},{label:"Adult ticket price",systemName:"adult_ticket_price",initValue:"100",type:"number"},{label:"Children ticket price",systemName:"children_ticket_price",initValue:"50",type:"number"},{label:"Currency",systemName:"currency",initValue:"USD",type:"text"}],ue=(t,e)=>e,ce=t=>e=>t(e.target.value),me=t=>e=>t(e.currentTarget),B=K.map(t=>{const e=G(),a=se(t.initValue).on(e,ue);return{...t,handler:ce(e),valueStore:a}}),Q=G(),fe=ie(async t=>{Telegram.WebApp.sendData(JSON.stringify(t))}),he=t=>{const e={};for(let a=0;a<t.length;a++)e[K[a].systemName]=t[a];return e};oe({source:B.map(({valueStore:t})=>t),clock:Q,fn:he,target:fe});const pe=()=>{};function de(t){let e,a,n,r,u,d,_;return{c(){e=b("label"),a=b("span"),n=F(t[0]),r=E(),u=b("input"),this.h()},l(f){e=y(f,"LABEL",{});var o=v(e);a=y(o,"SPAN",{});var c=v(a);n=I(c,t[0]),c.forEach(p),r=C(o),u=y(o,"INPUT",{type:!0}),o.forEach(p),this.h()},h(){V(u,"type",t[1]),u.value=t[4]},m(f,o){w(f,e,o),h(e,a),h(a,n),h(e,r),h(e,u),d||(_=R(u,"input",function(){Y(t[2])&&t[2].apply(this,arguments)}),d=!0)},p(f,[o]){t=f,o&1&&Z(n,t[0]),o&2&&V(u,"type",t[1]),o&16&&u.value!==t[4]&&(u.value=t[4])},i:N,o:N,d(f){f&&p(e),d=!1,_()}}}function _e(t,e,a){let n,r=N,u=()=>(r(),r=$(o,c=>a(4,n=c)),o);t.$$.on_destroy.push(()=>r());let{label:d=""}=e,{type:_="text"}=e,{handler:f=pe}=e,{valueStore:o=void 0}=e;return u(),t.$$set=c=>{"label"in c&&a(0,d=c.label),"type"in c&&a(1,_=c.type),"handler"in c&&a(2,f=c.handler),"valueStore"in c&&u(a(3,o=c.valueStore))},[d,_,f,o,n]}class be extends H{constructor(e){super(),L(this,e,_e,de,O,{label:0,type:1,handler:2,valueStore:3})}}function ye(t){let e,a;return{c(){e=b("script"),this.h()},l(n){const r=ee("svelte-1nfdud7",document.head);e=y(r,"SCRIPT",{src:!0}),v(e).forEach(p),r.forEach(p),this.h()},h(){te(e.src,a="https://telegram.org/js/telegram-web-app.js")||V(e,"src",a)},m(n,r){h(document.head,e)},p:N,i:N,o:N,d(n){p(e)}}}function ge(t,e,a){let{expand:n=!0}=e;return ae(()=>{n&&Telegram.WebApp.expand()}),t.$$set=r=>{"expand"in r&&a(0,n=r.expand)},[n]}class ve extends H{constructor(e){super(),L(this,e,ge,ye,O,{expand:0})}}function q(t,e,a){const n=t.slice();return n[0]=e[a],n}function D(t){let e,a;return e=new be({props:{label:t[0].label,type:t[0].type,handler:t[0].handler,valueStore:t[0].valueStore}}),{c(){U(e.$$.fragment)},l(n){J(e.$$.fragment,n)},m(n,r){W(e,n,r),a=!0},p:N,i(n){a||(x(e.$$.fragment,n),a=!0)},o(n){M(e.$$.fragment,n),a=!1},d(n){z(e,n)}}}function Ne(t){let e,a,n,r,u,d,_,f,o,c,k,T,P;e=new ve({});let g=B,i=[];for(let l=0;l<g.length;l+=1)i[l]=D(q(t,g,l));const X=l=>M(i[l],1,1,()=>{i[l]=null});return{c(){U(e.$$.fragment),a=E(),n=b("main"),r=b("form"),u=b("h1"),d=F("Create new event"),_=E();for(let l=0;l<i.length;l+=1)i[l].c();f=E(),o=b("button"),c=F("Create event"),this.h()},l(l){J(e.$$.fragment,l),a=C(l),n=y(l,"MAIN",{});var m=v(n);r=y(m,"FORM",{class:!0});var s=v(r);u=y(s,"H1",{});var S=v(u);d=I(S,"Create new event"),S.forEach(p),_=C(s);for(let A=0;A<i.length;A+=1)i[A].l(s);f=C(s),o=y(s,"BUTTON",{type:!0});var j=v(o);c=I(j,"Create event"),j.forEach(p),s.forEach(p),m.forEach(p),this.h()},h(){V(o,"type","submit"),V(r,"class","form svelte-14sj0h8")},m(l,m){W(e,l,m),w(l,a,m),w(l,n,m),h(n,r),h(r,u),h(u,d),h(r,_);for(let s=0;s<i.length;s+=1)i[s]&&i[s].m(r,null);h(r,f),h(r,o),h(o,c),k=!0,T||(P=R(r,"submit",me(Q)),T=!0)},p(l,[m]){if(m&0){g=B;let s;for(s=0;s<g.length;s+=1){const S=q(l,g,s);i[s]?(i[s].p(S,m),x(i[s],1)):(i[s]=D(S),i[s].c(),x(i[s],1),i[s].m(r,f))}for(re(),s=g.length;s<i.length;s+=1)X(s);ne()}},i(l){if(!k){x(e.$$.fragment,l);for(let m=0;m<g.length;m+=1)x(i[m]);k=!0}},o(l){M(e.$$.fragment,l),i=i.filter(Boolean);for(let m=0;m<i.length;m+=1)M(i[m]);k=!1},d(l){z(e,l),l&&p(a),l&&p(n),le(i,l),T=!1,P()}}}class Ve extends H{constructor(e){super(),L(this,e,null,Ne,O,{})}}export{Ve as component};
