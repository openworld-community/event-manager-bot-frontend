import{S as Te,i as Ue,s as We,k as P,q as ye,a as ve,l as F,m as q,r as _e,h as E,c as ke,n as oe,b as Ge,G as N,J as Je,K as ct,u as dt,H as se,L as pt,g as le,f as mt,d as Se,M as ht,y as gt,z as bt,A as yt,B as vt,v as _t}from"../chunks/index.6c819bfe.js";function kt(e,t){for(let r in e)t(e[r],r)}function z(e,t){e.forEach(t)}function H(e,t){if(!e)throw Error(t)}function te({node:e=[],from:t,source:r,parent:n=t||r,to:o,target:s,child:l=o||s,scope:f={},meta:h={},family:u={type:"regular"},regional:c}={}){let b=ne(n),g=ne(u.links),a=ne(u.owners),d=[];z(e,p=>p&&R(d,p));let i={id:zt(),seq:d,next:ne(l),meta:h,scope:f,family:{type:u.type||"crosslink",links:g,owners:a}};return z(g,p=>R(ce(p),i)),z(a,p=>R(de(p),i)),z(b,p=>R(p.next,i)),c&&O&&rt(Q(O),[i]),i}function Ke(e,t,r){let n,o=C,s=null,l=v;if(e.target&&(t=e.params,r=e.defer,n=e.meta,o="page"in e?e.page:o,e.stack&&(s=e.stack),l=re(e)||l,e=e.target),l&&v&&l!==v&&(v=null),Array.isArray(e))for(let d=0;d<e.length;d++)V("pure",o,A(e[d]),s,t[d],l,n);else V("pure",o,A(e),s,t,l,n);if(r&&!ae)return;let f,h,u,c,b,g,a={isRoot:ae,currentPage:C,scope:v,isWatch:ge,isPure:ie};ae=0;e:for(;c=jt();){let{idx:d,stack:i,type:p}=c;u=i.node,C=b=i.page,v=re(i),b?g=b.reg:v&&(g=v.reg);let m=!!b,x=!!v,I={fail:0,scope:u.scope};f=h=0;for(let k=d;k<u.seq.length&&!f;k++){let S=u.seq[k];if(S.order){let{priority:w,barrierID:y}=S.order,_=y?b?`${b.fullID}_${y}`:y:0;if(k!==d||p!==w){y?he.has(_)||(he.add(_),xe(k,i,w,y)):xe(k,i,w);continue e}y&&he.delete(_)}switch(S.type){case"mov":{let y,_=S.data;switch(_.from){case Y:y=Q(i);break;case"a":case"b":y=i[_.from];break;case"value":y=_.store;break;case"store":if(g&&!g[_.store.id])if(m){let pe=it(b,_.store.id);i.page=b=pe,pe?g=pe.reg:x?(U(v,_.store,0,1,_.softRead),g=v.reg):g=void 0}else x&&U(v,_.store,0,1,_.softRead);y=lt(g&&g[_.store.id]||_.store)}switch(_.to){case Y:i.value=y;break;case"a":case"b":i[_.to]=y;break;case"store":qt(b,v,u,_.target).current=y}break}case"compute":let w=S.data;if(w.fn){ge=M(u,"op")==="watch",ie=w.pure;let y=w.safe?(0,w.fn)(Q(i),I.scope,i):Dt(I,w.fn,i);w.filter?h=!y:i.value=y,ge=a.isWatch,ie=a.isPure}}f=I.fail||h}if(!f){let k=Q(i),S=re(i);if(z(u.next,w=>{V("child",b,w,i,k,S)}),S){M(u,"needFxCounter")&&V("child",b,S.fxCount,i,k,S),M(u,"storeChange")&&V("child",b,S.storeChange,i,k,S),M(u,"warnSerialize")&&V("child",b,S.warnSerializeNode,i,k,S);let w=S.additionalLinks[u.id];w&&z(w,y=>{V("child",b,y,i,k,S)})}}}ae=a.isRoot,C=a.currentPage,v=re(a)}function St(e,t){let r,n,o=e;if(t){let s=xt(t);e.length===0?(r=s.path,n=s.fullName):(r=s.path.concat([e]),n=s.fullName.length===0?e:s.fullName+"/"+e)}else r=e.length===0?[]:[e],n=e;return{shortName:o,fullName:n,path:r}}function K(e,...t){let r=Ce();if(r){let n=r.handlers[e];if(n)return n(r,...t)}}function $(e,t){let r=ee({or:t,and:typeof e=="string"?{name:e}:e}),n=(l,...f)=>(Z(!M(n,"derived"),"call of derived event","createEvent"),Z(!ie,"unit call from pure function","operators like sample"),C?((h,u,c,b)=>{let g=C,a=null;if(u)for(a=C;a&&a.template!==u;)a=T(a);De(a);let d=h.create(c,b);return De(g),d})(n,o,l,f):n.create(l,f)),o=Ce(),s=Object.assign(n,{graphite:te({meta:ut(r.actualOp||"event",n,r),regional:1}),create:l=>(Ke({target:n,params:l,scope:v}),l),watch:l=>st(n,l),map:l=>be(n,X,l,[D()]),filter:l=>be(n,"filter",l.fn?l:l.fn,[D(Ae,1)]),filterMap:l=>be(n,"filterMap",l,[D(),we(f=>!B(f),1)]),prepend(l){let f=$("* → "+n.shortName,{parent:T(n)});return K("eventPrepend",A(f)),Pe(f,n,[D()],"prepend",l),Ot(n,f),f}});return r!=null&&r.domain&&r.domain.hooks.event(s),J(s,"id",s.graphite.id),tt(s.graphite),s}function Fe(e,t,r,n){return It(r,t,"first argument"),H(j(n),"second argument should be a function"),Z(!M(e,"derived"),`${t} in derived store`,`${t} in store created via createStore`),z(Array.isArray(r)?r:[r],o=>{e.off(o),fe(e).set(o,ot(ft(o,e,"on",Et,n)))}),e}function Qe(e,t){let r=ee(t),n=Pt(e),o=$({named:"updates",derived:1});K("storeBase",n);let s=n.id,l={subscribers:new Map,updates:o,defaultState:e,stateRef:n,getState(){let a,d=n;if(C){let i=C;for(;i&&!i.reg[s];)i=T(i);i&&(a=i)}return!a&&v&&(U(v,n,1),a=v),a&&(d=a.reg[s]),lt(d)},setState:a=>Ke({target:l,params:a,defer:1,scope:v}),reset:(...a)=>(z(a,d=>Fe(l,".reset",d,()=>l.defaultState)),l),on:(a,d)=>Fe(l,".on",a,d),off(a){let d=fe(l).get(a);return d&&(d(),fe(l).delete(a)),l},map(a,d){let i,p;W(a)&&(i=a,a=a.fn),Z(B(d),"second argument of store.map","updateFilter");let m=l.getState();Ce()?p=null:B(m)||(p=a(m,d));let x=Qe(p,{name:`${l.shortName} → *`,derived:1,and:i}),I=ft(l,x,X,qe,a);return Ft(ue(x),{type:X,fn:a,from:n}),ue(x).noInit=1,K("storeMap",n,I),x},watch(a,d){if(!d||!Xe(a)){let i=st(l,a);return K("storeWatch",n,a)||a(l.getState()),i}return H(j(d),"second argument should be a function"),a.watch(i=>d(l.getState(),i))}},f=ut("store",l,r),h=l.defaultConfig.updateFilter;l.graphite=te({scope:{state:n,fn:h},node:[we((a,d,i)=>(i.scope&&!i.scope.reg[n.id]&&(i.b=1),a)),Vt(n),we((a,d,{a:i,b:p})=>!B(a)&&(a!==i||p),1),h&&D(qe,1),Ie({from:Y,target:n})],child:o,meta:{...f,defaultState:e},regional:1}),J(l,"id",l.graphite.id),J(l,"rootStateRefId",s);let u=M(l,"serialize"),c=M(l,"derived"),b=u==="ignore",g=M(l,"sid");return g&&(J(l,"storeChange",1),n.sid=g),g||b||c||J(l,"warnSerialize",1),H(c||!B(e),"current state can't be undefined, use null instead"),rt(l,[o]),r!=null&&r.domain&&r.domain.hooks.store(l),c||(l.reinit=$({named:"reinit"}),l.reset(l.reinit)),n.meta=l.graphite.meta,tt(l.graphite),l}let wt=typeof Symbol<"u"&&Symbol.observable||"@@observable",X="map",Y="stack",A=e=>e.graphite||e,ce=e=>e.family.owners,de=e=>e.family.links,ue=e=>e.stateRef,Q=e=>e.value,fe=e=>e.subscribers,T=e=>e.parent,re=e=>e.scope,M=(e,t)=>A(e).meta[t],J=(e,t,r)=>A(e).meta[t]=r,xt=e=>e.compositeName,Xe=e=>(j(e)||W(e))&&"kind"in e;const Ye=e=>t=>Xe(t)&&t.kind===e;let Ze=Ye("store"),Mt=Ye("domain"),me=(e,t)=>{let r=e.indexOf(t);r!==-1&&e.splice(r,1)},R=(e,t)=>e.push(t),Z=(e,t,r)=>!e&&console.error(`${t} is deprecated${r?`, use ${r} instead`:""}`);const ze=()=>{let e=0;return()=>""+ ++e};let Nt=ze(),et=ze(),zt=ze(),O=null,tt=e=>{},Ce=()=>O,Ct=e=>(e&&O&&O.sidRoot&&(e=`${O.sidRoot}|${e}`),e),rt=(e,t)=>{let r=A(e);z(t,n=>{let o=A(n);r.family.type!=="domain"&&(o.family.type="crosslink"),R(ce(o),r),R(de(r),o)})},ne=(e=[])=>(Array.isArray(e)?e:[e]).flat().map(A),W=e=>typeof e=="object"&&e!==null,j=e=>typeof e=="function",B=e=>e===void 0,At=e=>H(W(e)||j(e),"expect first argument be an object");const je=(e,t,r,n)=>H(!(!W(e)&&!j(e)||!("family"in e)&&!("graphite"in e)),`${t}: expect ${r} to be a unit (store, event or effect)${n}`);let It=(e,t,r)=>{Array.isArray(e)?z(e,(n,o)=>je(n,t,`${o} item of ${r}`,"")):je(e,t,r," or array of units")},qe=(e,{fn:t},{a:r})=>t(e,r),Et=(e,{fn:t},{a:r})=>t(r,e),Ae=(e,{fn:t})=>t(e);const nt=(e,t,r,n)=>{let o={id:et(),type:e,data:t};return r&&(o.order={priority:r},n&&(o.order.barrierID=++Rt)),o};let Rt=0,Ie=({from:e="store",store:t,target:r,to:n=r?"store":Y,batch:o,priority:s})=>nt("mov",{from:e,store:t,to:n,target:r},s,o),Ee=({fn:e,batch:t,priority:r,safe:n=0,filter:o=0,pure:s=0})=>nt("compute",{fn:e,safe:n,filter:o,pure:s},r,t),at=({fn:e})=>Ee({fn:e,priority:"effect"}),we=(e,t,r)=>Ee({fn:e,safe:1,filter:t,priority:r&&"effect"}),Vt=(e,t,r)=>Ie({store:e,to:t?Y:"a",priority:r&&"sampler",batch:1}),D=(e=Ae,t)=>Ee({fn:e,pure:1,filter:t}),Pt=e=>({id:et(),current:e}),lt=({current:e})=>e,Ft=(e,t)=>{e.before||(e.before=[]),R(e.before,t)},L=null;const Re=(e,t)=>{if(!e)return t;if(!t)return e;let r;return(e.v.type===t.v.type&&e.v.id>t.v.id||Me(e.v.type)>Me(t.v.type))&&(r=e,e=t,t=r),r=Re(e.r,t),e.r=e.l,e.l=r,e},Ve=[];let Be=0;for(;Be<6;)R(Ve,{first:null,last:null,size:0}),Be+=1;const jt=()=>{for(let e=0;e<6;e++){let t=Ve[e];if(t.size>0){if(e===3||e===4){t.size-=1;let n=L.v;return L=Re(L.l,L.r),n}t.size===1&&(t.last=null);let r=t.first;return t.first=r.r,t.size-=1,r.v}}},V=(e,t,r,n,o,s,l)=>xe(0,{a:null,b:null,node:r,parent:n,value:o,page:t,scope:s,meta:l},e),xe=(e,t,r,n=0)=>{let o=Me(r),s=Ve[o],l={v:{idx:e,stack:t,type:r,id:n},l:null,r:null};o===3||o===4?L=Re(L,l):(s.size===0?s.first=l:s.last.r=l,s.last=l),s.size+=1},Me=e=>{switch(e){case"child":return 0;case"pure":return 1;case"read":return 2;case"barrier":return 3;case"sampler":return 4;case"effect":return 5;default:return-1}},he=new Set;let v,ae=1,ge=0,ie=0,C=null,De=e=>{C=e};const it=(e,t)=>{if(e){for(;e&&!e.reg[t];)e=T(e);if(e)return e}return null};let qt=(e,t,r,n,o)=>{let s=it(e,n.id);return s?s.reg[n.id]:t?(U(t,n,o),t.reg[n.id]):n};const Bt=e=>e;let U=(e,t,r,n,o)=>{var s;let l=e.reg,f=t.sid,h=t==null||(s=t.meta)===null||s===void 0?void 0:s.serialize,u=e.fromSerialize&&h!=="ignore"&&(h==null?void 0:h.read)||Bt;if(l[t.id])return;let c={id:t.id,current:t.current,meta:t.meta};if(c.id in e.values.idMap)c.current=e.values.idMap[c.id];else if(f&&f in e.values.sidMap&&!(f in e.sidIdMap))c.current=u(e.values.sidMap[f]);else if(t.before&&!o){let b=0,g=r||!t.noInit||n;z(t.before,a=>{switch(a.type){case X:{let d=a.from;if(d||a.fn){d&&U(e,d,r,n);let i=d&&l[d.id].current;g&&(c.current=a.fn?a.fn(i):i)}break}case"field":b||(b=1,c.current=Array.isArray(c.current)?[...c.current]:{...c.current}),U(e,a.from,r,n),g&&(c.current[a.field]=l[l[a.from.id].id].current)}})}f&&(e.sidIdMap[f]=t.id),l[t.id]=c};const Dt=(e,t,r)=>{try{return t(Q(r),e.scope,r)}catch(n){console.error(n),e.fail=1,e.failReason=n}};let ee=(e,t={})=>(W(e)&&(ee(e.or,t),kt(e,(r,n)=>{B(r)||n==="or"||n==="and"||(t[n]=r)}),ee(e.and,t)),t);const Le=(e,t)=>{me(e.next,t),me(ce(e),t),me(de(e),t)},Ne=(e,t,r)=>{let n;e.next.length=0,e.seq.length=0,e.scope=null;let o=de(e);for(;n=o.pop();)Le(n,e),(t||r&&M(e,"op")!=="sample"||n.family.type==="crosslink")&&Ne(n,t,M(n,"op")!=="on"&&r);for(o=ce(e);n=o.pop();)Le(n,e),r&&n.family.type==="crosslink"&&Ne(n,t,M(n,"op")!=="on"&&r)},G=e=>e.clear();let Lt=(e,{deep:t}={})=>{let r=0;if(e.ownerSet&&e.ownerSet.delete(e),Ze(e))G(fe(e));else if(Mt(e)){r=1;let n=e.history;G(n.events),G(n.effects),G(n.stores),G(n.domains)}Ne(A(e),!!t,r)},ot=e=>{let t=()=>Lt(e);return t.unsubscribe=t,t},Pe=(e,t,r,n,o)=>te({node:r,parent:e,child:t,scope:{fn:o},meta:{op:n},family:{owners:[e,t],links:t},regional:1}),st=(e,t)=>(H(j(t),".watch argument should be a function"),ot(te({scope:{fn:t},node:[at({fn:Ae})],parent:e,meta:{op:"watch"},family:{owners:e},regional:1}))),Ot=(e,t,r="event")=>{T(e)&&T(e).hooks[r](t)},ut=(e,t,r)=>{let n=ee(r),o=e==="domain",s=Nt(),{sid:l=null,named:f=null,domain:h=null,parent:u=h}=n,c=f||n.name||(o?"":s),b=St(c,u),g={op:t.kind=e,name:t.shortName=c,sid:t.sid=Ct(l),named:f,unitId:t.id=s,serialize:n.serialize,derived:n.derived,config:n};return t.parent=u,t.compositeName=b,t.defaultConfig=n,t.thru=a=>(Z(0,"thru","js pipe"),a(t)),t.getType=()=>b.fullName,!o&&(t.subscribe=a=>(At(a),t.watch(j(a)?a:d=>a.next&&a.next(d))),t[wt]=()=>t),g};const be=(e,t,r,n)=>{let o;W(r)&&(o=r,r=r.fn);let s=$({name:`${e.shortName} → *`,derived:1,and:o});return Pe(e,s,n,t,r),s},ft=(e,t,r,n,o)=>{let s=ue(t),l=Ie({store:s,to:"a",priority:"read"});r===X&&(l.data.softRead=1);let f=[l,D(n)];return K("storeOnMap",s,f,Ze(e)&&ue(e)),Pe(e,t,f,r,o)};te({node:[at({fn:({fn:e,value:t})=>e(t)})],meta:{op:"fx",fx:"sidechain"}});const Ht=[{label:"Name",initValue:"",type:"text"},{label:"Link",initValue:"",type:"text"},{label:"Start date",initValue:"",type:"date"},{label:"Remind date",initValue:"",type:"date"},{label:"Max adults amount",initValue:"100",type:"number"},{label:"Max children amount",initValue:"100",type:"number"},{label:"Max adults per reservation",initValue:"4",type:"number"},{label:"Max children per reservation",initValue:"4",type:"number"},{label:"Adult ticket price",initValue:"100",type:"number"},{label:"Children ticket price",initValue:"50",type:"number"},{label:"Currency",initValue:"USD",type:"text"}],$t=(e,t)=>t,Tt=e=>t=>e(t.target.value),Ut=e=>()=>e(),Oe=Ht.map(e=>{const t=$(),r=Qe(e.initValue).on(t,$t);return{...e,handler:Tt(t),valueStore:r}}),Wt=$(),Gt=()=>{};function Jt(e){let t,r,n,o,s,l,f;return{c(){t=P("label"),r=P("span"),n=ye(e[0]),o=ve(),s=P("input"),this.h()},l(h){t=F(h,"LABEL",{});var u=q(t);r=F(u,"SPAN",{});var c=q(r);n=_e(c,e[0]),c.forEach(E),o=ke(u),s=F(u,"INPUT",{type:!0}),u.forEach(E),this.h()},h(){oe(s,"type",e[1]),s.value=e[4]},m(h,u){Ge(h,t,u),N(t,r),N(r,n),N(t,o),N(t,s),l||(f=Je(s,"input",function(){ct(e[2])&&e[2].apply(this,arguments)}),l=!0)},p(h,[u]){e=h,u&1&&dt(n,e[0]),u&2&&oe(s,"type",e[1]),u&16&&s.value!==e[4]&&(s.value=e[4])},i:se,o:se,d(h){h&&E(t),l=!1,f()}}}function Kt(e,t,r){let n,o=se,s=()=>(o(),o=pt(u,c=>r(4,n=c)),u);e.$$.on_destroy.push(()=>o());let{label:l=""}=t,{type:f="text"}=t,{handler:h=Gt}=t,{valueStore:u=void 0}=t;return s(),e.$$set=c=>{"label"in c&&r(0,l=c.label),"type"in c&&r(1,f=c.type),"handler"in c&&r(2,h=c.handler),"valueStore"in c&&s(r(3,u=c.valueStore))},[l,f,h,u,n]}class Qt extends Te{constructor(t){super(),Ue(this,t,Kt,Jt,We,{label:0,type:1,handler:2,valueStore:3})}}function He(e,t,r){const n=e.slice();return n[0]=t[r],n}function $e(e){let t,r;return t=new Qt({props:{label:e[0].label,type:e[0].type,handler:e[0].handler,valueStore:e[0].valueStore}}),{c(){gt(t.$$.fragment)},l(n){bt(t.$$.fragment,n)},m(n,o){yt(t,n,o),r=!0},p:se,i(n){r||(le(t.$$.fragment,n),r=!0)},o(n){Se(t.$$.fragment,n),r=!1},d(n){vt(t,n)}}}function Xt(e){let t,r,n,o,s,l,f,h,u,c,b,g=Oe,a=[];for(let i=0;i<g.length;i+=1)a[i]=$e(He(e,g,i));const d=i=>Se(a[i],1,1,()=>{a[i]=null});return{c(){t=P("main"),r=P("form"),n=P("h1"),o=ye("Create new event"),s=ve();for(let i=0;i<a.length;i+=1)a[i].c();l=ve(),f=P("button"),h=ye("Create event"),this.h()},l(i){t=F(i,"MAIN",{});var p=q(t);r=F(p,"FORM",{class:!0});var m=q(r);n=F(m,"H1",{});var x=q(n);o=_e(x,"Create new event"),x.forEach(E),s=ke(m);for(let k=0;k<a.length;k+=1)a[k].l(m);l=ke(m),f=F(m,"BUTTON",{type:!0});var I=q(f);h=_e(I,"Create event"),I.forEach(E),m.forEach(E),p.forEach(E),this.h()},h(){oe(f,"type","submit"),oe(r,"class","form svelte-14sj0h8")},m(i,p){Ge(i,t,p),N(t,r),N(r,n),N(n,o),N(r,s);for(let m=0;m<a.length;m+=1)a[m]&&a[m].m(r,null);N(r,l),N(r,f),N(f,h),u=!0,c||(b=Je(r,"submit",Ut(Wt)),c=!0)},p(i,[p]){if(p&0){g=Oe;let m;for(m=0;m<g.length;m+=1){const x=He(i,g,m);a[m]?(a[m].p(x,p),le(a[m],1)):(a[m]=$e(x),a[m].c(),le(a[m],1),a[m].m(r,l))}for(_t(),m=g.length;m<a.length;m+=1)d(m);mt()}},i(i){if(!u){for(let p=0;p<g.length;p+=1)le(a[p]);u=!0}},o(i){a=a.filter(Boolean);for(let p=0;p<a.length;p+=1)Se(a[p]);u=!1},d(i){i&&E(t),ht(a,i),c=!1,b()}}}class Zt extends Te{constructor(t){super(),Ue(this,t,null,Xt,We,{})}}export{Zt as component};
