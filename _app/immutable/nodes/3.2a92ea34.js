import{S as J,i as U,s as j,k as b,q as F,a as V,l as v,m as g,r as O,h as d,c as T,n as E,b as w,G as p,J as D,K as Y,u as Z,H as x,L as $,y as q,z as R,A as z,M as ee,g as N,f as te,d as C,B as G,N as ae,O as ne,v as le}from"../chunks/index.b4019323.js";import{u as K,p as re,y as se,x as oe,T as ie}from"../chunks/TelegramScript.3bae3cc9.js";const W=[{label:"Name",systemName:"name",initValue:"",type:"text"},{label:"Link",systemName:"link",initValue:"",type:"text"},{label:"Start date",systemName:"start",initValue:"",type:"date"},{label:"Remind date",systemName:"remind",initValue:"",type:"date"},{label:"Max adults amount",systemName:"max_adults",initValue:"100",type:"number"},{label:"Max children amount",systemName:"max_children",initValue:"100",type:"number"},{label:"Max adults per reservation",systemName:"max_adults_per_reservation",initValue:"4",type:"number"},{label:"Max children per reservation",systemName:"max_children_per_reservation",initValue:"4",type:"number"},{label:"Adult ticket price",systemName:"adult_ticket_price",initValue:"100",type:"number"},{label:"Children ticket price",systemName:"children_ticket_price",initValue:"50",type:"number"},{label:"Currency",systemName:"currency",initValue:"USD",type:"text"}],ue=(t,e)=>e,ce=t=>e=>t(e.target.value),me=t=>e=>t(e.currentTarget),I=W.map(t=>{const e=K(),a=re(t.initValue).on(e,ue);return{...t,handler:ce(e),valueStore:a}}),Q=K(),fe=se(async t=>{Telegram.WebApp.sendData(JSON.stringify(t))}),pe=t=>{const e={};for(let a=0;a<t.length;a++)e[W[a].systemName]=t[a];return e};oe({source:I.map(({valueStore:t})=>t),clock:Q,fn:pe,target:fe});const he=()=>{};function _e(t){let e,a,l,i,u,h,_;return{c(){e=b("label"),a=b("span"),l=F(t[0]),i=V(),u=b("input"),this.h()},l(f){e=v(f,"LABEL",{});var o=g(e);a=v(o,"SPAN",{});var c=g(a);l=O(c,t[0]),c.forEach(d),i=T(o),u=v(o,"INPUT",{type:!0}),o.forEach(d),this.h()},h(){E(u,"type",t[1]),u.value=t[4]},m(f,o){w(f,e,o),p(e,a),p(a,l),p(e,i),p(e,u),h||(_=D(u,"input",function(){Y(t[2])&&t[2].apply(this,arguments)}),h=!0)},p(f,[o]){t=f,o&1&&Z(l,t[0]),o&2&&E(u,"type",t[1]),o&16&&u.value!==t[4]&&(u.value=t[4])},i:x,o:x,d(f){f&&d(e),h=!1,_()}}}function de(t,e,a){let l,i=x,u=()=>(i(),i=$(o,c=>a(4,l=c)),o);t.$$.on_destroy.push(()=>i());let{label:h=""}=e,{type:_="text"}=e,{handler:f=he}=e,{valueStore:o=void 0}=e;return u(),t.$$set=c=>{"label"in c&&a(0,h=c.label),"type"in c&&a(1,_=c.type),"handler"in c&&a(2,f=c.handler),"valueStore"in c&&u(a(3,o=c.valueStore))},[h,_,f,o,l]}class ye extends J{constructor(e){super(),U(this,e,de,_e,j,{label:0,type:1,handler:2,valueStore:3})}}async function be(t){try{const e=await fetch(`${serverAddress}/event`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});e.ok?console.log("Данные успешно отправлены на сервер!"):console.error("Ошибка при отправке данных на сервер:",e.status)}catch(e){console.error("Ошибка при отправке данных на сервер:",e)}}function L(t,e,a){const l=t.slice();return l[1]=e[a],l}function P(t){let e,a;return e=new ye({props:{label:t[1].label,type:t[1].type,handler:t[1].handler,valueStore:t[1].valueStore}}),{c(){q(e.$$.fragment)},l(l){R(e.$$.fragment,l)},m(l,i){z(e,l,i),a=!0},p:x,i(l){a||(N(e.$$.fragment,l),a=!0)},o(l){C(e.$$.fragment,l),a=!1},d(l){G(e,l)}}}function ve(t){let e,a,l,i,u,h,_,f,o,c,k,M,B;e=new ie({});let y=I,s=[];for(let n=0;n<y.length;n+=1)s[n]=P(L(t,y,n));const X=n=>C(s[n],1,1,()=>{s[n]=null});return{c(){q(e.$$.fragment),a=V(),l=b("main"),i=b("form"),u=b("h1"),h=F("Create new event"),_=V();for(let n=0;n<s.length;n+=1)s[n].c();f=V(),o=b("button"),c=F("Create event"),this.h()},l(n){R(e.$$.fragment,n),a=T(n),l=v(n,"MAIN",{});var m=g(l);i=v(m,"FORM",{class:!0});var r=g(i);u=v(r,"H1",{});var S=g(u);h=O(S,"Create new event"),S.forEach(d),_=T(r);for(let A=0;A<s.length;A+=1)s[A].l(r);f=T(r),o=v(r,"BUTTON",{type:!0});var H=g(o);c=O(H,"Create event"),H.forEach(d),r.forEach(d),m.forEach(d),this.h()},h(){E(o,"type","submit"),E(i,"class","form svelte-14sj0h8")},m(n,m){z(e,n,m),w(n,a,m),w(n,l,m),p(l,i),p(i,u),p(u,h),p(i,_);for(let r=0;r<s.length;r+=1)s[r]&&s[r].m(i,null);p(i,f),p(i,o),p(o,c),k=!0,M||(B=[D(o,"click",ee(t[0])),D(i,"submit",me(Q))],M=!0)},p(n,[m]){if(m&0){y=I;let r;for(r=0;r<y.length;r+=1){const S=L(n,y,r);s[r]?(s[r].p(S,m),N(s[r],1)):(s[r]=P(S),s[r].c(),N(s[r],1),s[r].m(i,f))}for(le(),r=y.length;r<s.length;r+=1)X(r);te()}},i(n){if(!k){N(e.$$.fragment,n);for(let m=0;m<y.length;m+=1)N(s[m]);k=!0}},o(n){C(e.$$.fragment,n),s=s.filter(Boolean);for(let m=0;m<s.length;m+=1)C(s[m]);k=!1},d(n){G(e,n),n&&d(a),n&&d(l),ae(s,n),M=!1,ne(B)}}}function ge(t){return[()=>be(inputData)]}class ke extends J{constructor(e){super(),U(this,e,ge,ve,j,{})}}export{ke as component};
